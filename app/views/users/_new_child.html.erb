<% id = f.object.object_id %>
<fieldset class="child">
  <div class="row">
    <div class="col-md-6">
      <%= f.input :nested_user, label: false,
        input_html: {
          id: "auto_user_#{id}",
          class: 'autocomplete_field',
          autofocus: true,
          value: (f.object.full_name_with_function if f.object.persisted?),
          data: {
            'autocomplete-params' => ({ user_id: @user.id } unless @user.new_record?),
            'autocomplete-url' => auto_complete_for_user_users_path,
            'autocomplete-id-target' => "#auto_user_id_#{id}"
          }
        }
      %>
      <%= f.input :child_id, as: :hidden, input_html: {
        name: 'user[child_ids][]', value: f.object.id, id: "auto_user_id_#{id}",
        class: 'autocomplete_id'
      } %>
    </div>
    <div class="col-md-6">
      <div class="show_hide">
        <%= link_to_remove_nested_item(f) %>
      </div>
    </div>
  </div>
</fieldset>
