<% id = f.object.object_id %>
<fieldset class="related_user_relation">
  <div class="row">
    <div class="col-md-6">
      <%= f.input :related_user, label: false, input_html: {
        id: "user_related_user_relation_#{id}",
        class: 'autocomplete_field',
        title: t('label.search'),
        value: f.object.try(:related_user).try(:full_name_with_function),
        autofocus: true,
        data: {
          'autocomplete-params' => ("{user_id: #{@user.id}}" unless @user.new_record?),
          'autocomplete-url' => auto_complete_for_user_users_path,
          'autocomplete-id-target' => "#hidden_related_user_relation_#{id}"
        }
      } %>
      <%= f.input :related_user_id, as: :hidden, input_html: {
        id: "hidden_related_user_relation_#{id}", class: :autocomplete_id
      } %>
    </div>
    <div class="col-md-6">
      <div class="show_hide">
        <%= link_to_remove_nested_item(f) %>
      </div>
    </div>
  </div>
</fieldset>
